<!DOCTYPE html>
<!--http://weibo.com/2330269092/E5XVkvFXu?from=page_1005052330269092_profile&wvr=6&mod=weibotime&type=comment-->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <style type="text/css">
.container {
  display:inline-block;
  position:relative;
}

#car {
  display:none;
  position:absolute;
  width:5px;
  height:20px;
  background:linear-gradient(red 50%,blue 100%);
}
  </style>
</head>
<body>
<div class="container">
  <svg width="135" height="402" xmlns="http://www.w3.org/2000/svg">
 <!-- Created with Method Draw - http://github.com/duopixel/Method-Draw/ -->

 <g>
  <title>background</title>
  <rect x="-1" y="-1" width="137" height="404" id="canvas_background" fill="#fff"/>
  <g id="canvasGrid" display="none">
   <rect id="svg_2" width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)"/>
  </g>
 </g>
 <g>
  <title>Layer 1</title>
  <path id='path' fill="none" stroke-width="1.5" id="svg_1" d="m135.5,401c0,-0.95465 -2,-0.95465 -3,-1.90931c-3,-2.86396 -6.186,-3.52509 -8,-4.77327c-1.14727,-0.78941 -2.09789,-2.69636 -4,-3.81862c-1.7013,-1.00377 -3,0 -5,-1.90931c-1,-0.95465 -1.82375,-3.32818 -4,-3.81862c-0.97325,-0.21935 -2.82443,-0.09346 -4,-1.90931c-1.05146,-1.62415 -2.4588,-1.61666 -3,-2.86396c-0.38268,-0.88199 -0.15224,-2.13329 -2,-2.86396c-1.30656,-0.51666 -1,-2.86396 -2,-2.86396c-2,0 -2.91761,-0.36933 -4,-2.86396c-0.38268,-0.88199 -1,-0.95465 -3,-2.86396c-1,-0.95465 -3.29289,-2.18893 -4,-2.86396c-0.70711,-0.67503 -1.69344,-1.39265 -3,-1.90931c-1.84776,-0.73067 -2.29289,-1.23428 -3,-1.90931c-0.70711,-0.67503 -1.29289,-1.23428 -2,-1.90931c-1.41422,-1.35009 -1.58578,-0.55922 -3,-1.90931c-1.41422,-1.35009 -1.23463,-3.00931 -2,-4.77327c-0.5412,-1.2473 -1.186,-2.57044 -3,-3.81862c-1.14727,-0.78941 -2.29289,-2.18893 -3,-2.86396c-1.41422,-1.35009 0.76537,-2.05466 0,-3.81862c-0.5412,-1.2473 0.41422,-2.46853 -1,-3.81862c-1.41422,-1.35009 -1.09789,-1.7417 -3,-2.86396c-0.85065,-0.50189 -1,-1.90931 -2,-2.86396c-2,-1.90931 -3,-2.86396 -5,-4.77327c-1,-0.95465 -2.23463,-1.1 -3,-2.86396c-0.54119,-1.2473 -2.69344,-3.30196 -4,-3.81862c-1.84776,-0.73067 -1.69344,-2.3473 -3,-2.86396c-1.84776,-0.73067 -1.69344,-2.3473 -3,-2.86396c-1.84776,-0.73067 -2.45881,-1.61666 -3,-2.86396c-0.76537,-1.76396 -1.29289,-2.18893 -2,-2.86396c-1.41422,-1.35009 -2.85273,-2.07455 -4,-2.86396c-1.81399,-1.24818 -3,-2.86396 -4,-3.81862c-2,-1.90931 -3.91761,-2.27864 -5,-4.77327c-0.38268,-0.88199 -1.29289,-2.18893 -2,-2.86396c-0.70711,-0.67503 -0.4588,-2.57131 -1,-3.81862c-0.76537,-1.76396 0,-4.77327 0,-5.72792c0,-1.90931 -0.45951,-2.91503 0,-4.77327c0.51374,-2.07756 2.49346,-2.74804 3,-5.72792c0.16018,-0.94233 1.33749,-3.1599 3,-5.72792c1.48699,-2.2969 2.69255,-3.99619 4,-5.72792c1.65381,-2.19049 3.70546,-5.10376 6,-6.68258c1.81399,-1.24816 4.08052,-4.28346 6,-6.68258c2.18855,-2.73542 6.18601,-4.47976 8,-5.72792c3.44181,-2.36822 6,-4.77327 9,-7.63723c3,-2.86396 3.81266,-3.06139 6,-4.77327c2.78832,-2.18222 5.132,-3.58502 9,-5.72792c3.11848,-1.72766 5.88152,-3.04561 9,-4.77327c1.934,-1.07145 4.41886,-2.30917 6,-3.81862c1.58114,-1.50945 1.43462,-3.96275 4,-5.72792c1.62248,-1.11639 2.69255,-3.04153 4,-4.77327c1.65381,-2.19049 3.41589,-2.63587 5,-5.72792c1.38935,-2.71191 2.51945,-5.76491 3,-8.59189c0.50654,-2.9799 1.48626,-6.51432 2,-8.59189c0.68926,-2.78735 0,-4.77327 0,-7.63723c0,-0.95465 -0.14429,-2.80109 -1,-4.77327c-1.21015,-2.78909 -0.41886,-4.21848 -2,-5.72792c-1.58114,-1.50945 -2,-3.81862 -4,-5.72792c-3,-2.86396 -4.28859,-6.55684 -6,-10.50119c-1.21015,-2.78909 -2.61065,-7.78928 -4,-10.50119c-1.58411,-3.09205 -3,-4.77327 -5,-6.68258c-2,-1.90931 -3.34619,-3.53743 -5,-5.72792c-1.30745,-1.73174 -4.31021,-3.55035 -7,-6.68258c-2.28588,-2.66188 -5.21168,-5.45501 -8,-7.63723c-1.09367,-0.85594 -2.797,-3.10883 -4,-3.81862c-2.68999,-1.58712 -4.1731,-1.76872 -5,-2.86396c-1.30745,-1.73174 -2.52016,-2.2183 -4,-3.81862c-2.38616,-2.58043 -4.21167,-2.59104 -7,-4.77327c-3.28101,-2.56782 -4.34619,-3.53743 -6,-5.72792c-1.30745,-1.73174 -2.07612,-2.49863 -3,-2.86396c-1.30656,-0.51666 -1.58578,-0.55922 -3,-1.90931c-1.41422,-1.35009 0.05146,-3.14912 -1,-4.77327c-1.17557,-1.81586 -2.29289,-2.18892 -3,-2.86396c-0.70711,-0.67504 -1,-0.95465 -2,-1.90931c-2,-1.90931 -2.29289,-3.14357 -3,-3.81862c-1.41421,-1.35009 -2.4588,-1.61664 -3,-2.86396c-0.76537,-1.76397 -2,-2.86396 -2,-5.72792c0,-2.86396 0,-5.72792 0,-8.59189c0,-2.86396 -0.52018,-6.77258 1,-13.36515c2.24451,-9.73383 8.12002,-21.52613 14,-29.59427c5.26541,-7.22487 9,-11.45585 11,-12.4105l0,-0.95465" stroke="#000"/>
 </g>
</svg>
  
  <div id="car"></div>
</div>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js"></script>
<script type="text/javascript">
var STEP = 100;
var curStep = 0;

var path = $('#path')[0];
var $car = $('#car');

var timer = null;
var totalLength = path.getTotalLength();
var initPosition = path.getPointAtLength(0);
var prePosition = initPosition;
var curPosition = initPosition;


function getRotate(a, b) {
  var k = (b.y - a.y) / (b.x - a.x);
  var rotate = Math.atan(k) * 180 / Math.PI;
  return k < 0 ? rotate + 90 : rotate - 90;
}

// 定位car 
$car.css({
  left: initPosition.x,
  top:initPosition.y,
  '-webkit-transform': 'rotate(' + getRotate(curPosition , path.getPointAtLength(1)) +'deg)'
}).show()

timer = setInterval(function() {

  if (curStep != STEP) {
    curStep++;

    curPosition = path.getPointAtLength(totalLength/STEP * curStep);


    $car.css({
      left: curPosition.x,
      top:curPosition.y,
     '-webkit-transform': 'rotate('+getRotate(prePosition, curPosition)+'deg)'
    }).show();
    prePosition = curPosition;
  } else {
    clearInterval(timer);
  }

}, 30)

</script>
  </body>
</html>